{{ define "main" }}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 pb-20">
  <!-- Tags -->
  <div class="mb-4 flex flex-wrap gap-2">
    {{ range .Params.tags }}
    <a href="{{ $.Site.Home.RelPermalink }}?tag={{ . }}" class="inline-block bg-primary/10 text-primary text-sm font-semibold px-3 py-1 rounded no-underline hover:bg-primary/20 transition-colors">{{ . }}</a>
    {{ end }}
  </div>

  <!-- Title -->
  <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4 leading-tight">{{ .Title }}</h1>

  <!-- Date -->
  <time class="text-gray-400 dark:text-gray-500 text-sm">{{ .Date.Format "2006. 01. 02" }}</time>

  <!-- Featured image -->
  {{ with .Params.image }}
  <div class="mt-8 rounded-2xl overflow-hidden">
    <img src="{{ . }}" alt="{{ $.Title }}" class="w-full object-cover">
  </div>
  {{ end }}

  <!-- Content -->
  <div class="mt-10 prose-sm dark:prose-invert max-w-none
    prose-headings:text-gray-900 dark:prose-headings:text-gray-100 prose-headings:font-bold
    prose-p:text-gray-700 dark:prose-p:text-gray-300 prose-p:leading-relaxed
    prose-a:text-primary prose-a:no-underline hover:prose-a:underline
    prose-strong:text-gray-900 dark:prose-strong:text-gray-100
    prose-ul:text-gray-700 dark:prose-ul:text-gray-300 prose-ol:text-gray-700 dark:prose-ol:text-gray-300
    prose-li:marker:text-primary
    prose-blockquote:border-primary prose-blockquote:text-gray-600 dark:prose-blockquote:text-gray-400
    prose-code:text-primary prose-code:bg-gray-50 dark:prose-code:bg-gray-800 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:before:content-none prose-code:after:content-none
    prose-pre:bg-gray-900 dark:prose-pre:bg-gray-800 prose-pre:text-gray-100 prose-pre:rounded-xl
    prose-img:rounded-xl prose-img:shadow-md">
    {{ .Content }}
  </div>
</div>
{{ end }}

{{ define "scripts" }}
<style>
  aside {
    background: #f0f7ff;
    border-left: 4px solid #4374D9;
    border-radius: 0.75rem;
    padding: 1.25rem 1.5rem;
    margin: 1.5rem 0;
  }
  .dark aside {
    background: #1a2332;
  }
  aside p { margin: 0.25rem 0; }
  .mermaid { background: #f9fafb; border-radius: 0.75rem; padding: 1.5rem; margin: 1.5rem 0; text-align: center; }
  .dark .mermaid { background: #111827; }
</style>
<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  var isDark = document.documentElement.classList.contains('dark');
  mermaid.initialize({ startOnLoad: true, theme: isDark ? 'dark' : 'neutral' });
</script>
{{ end }}
